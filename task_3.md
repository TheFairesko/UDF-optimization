# Задание 3
## Запрос на возможные улучшения с изменением структуры БД
Для оптимизации с допущением изменений структуры БД был введён следуюший промпт:

---

Теперь ты имеешь доступ ко всей структуре БД и, если для оптимизации требуется создание новых таблиц, столбцов, триггеров или хранимых процедур (функций), то необходимо описать возможные недостатки и отрицательные последствия от таких изменений.

Напоминаю задание:
Предложи правки запроса (select top 3000 * from dbo.F_WORKS_LIST()) такие, что время выполнения запроса получения 3 000 заказов из 50 000 со средним количеством элементов в заказе равным 3 не будет превышать 1-2 сек.

---

## Возможные улучшения
Предложенная оптимизация с изменениями структуры базы данных:

- Денормализация: добавление столбцов в таблицу Works
    Добавить столбцы WorkItemsNotComplit и WorkItemsComplit в таблицу Works и обновлять их с помощью триггеров.
    - **Преимущества**:
        - Ускоряет запрос, так как данные предвычислены.
        - Упрощает функцию F_WORKS_LIST, убирая необходимость подсчётов.
    - **Недостатки**:
        - Увеличивает нагрузку на сервер при вставке, обновлении или удалении записей в WorkItem.
        - Риск несоответствия данных при сбоях триггера.
        - Усложняет поддержку базы данных.М

- Кэширование в отдельной таблице
    Создать таблицу WorksCache для хранения предвычисленных данных и обновлять её периодически или по триггеру.
    - **Преимущества**:
        - Значительно ускоряет запрос за счёт предвычислений.
    - **Недостатки**:
        - Данные могут быть неактуальными между обновлениями.
        - Дополнительная нагрузка на сервер при обновлении кэша.
        - Требуется управление кэшем и обработка ошибок.