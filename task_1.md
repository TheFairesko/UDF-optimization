# Задание 1
## Запрос на анализ проблемных мест
Для выполнения задания 1 был отправлен следующий промпт:

---

Далее, проанализировав скрипт функции получения списка заказов (select top 3000 * from dbo.F_WORKS_LIST()) и связанные с ней объекты, перечисли выявленные недочёты и потенциальные проблемы производительности.

---

## Анализ ответа
Представленные моделью недочёты и проблемы производительности, с которыми я согласен:

- Использование скалярных функций в SELECT
    При выборке 3000 строк функция F_WORKITEMS_COUNT_BY_ID_WORK будет вызвана 6000 раз (по два раза на строку), а F_EMPLOYEE_FULLNAME — 3000 раз. Это резко увеличивает время выполнения запроса.
- Отсутствие ORDER BY при использовании TOP 3000
    Запрос внутри функции использует SELECT TOP 3000, но без указания ORDER BY. Без сортировки порядок строк в результате не гарантирован, что делает выборку недетерминированной. Это означает, что при каждом выполнении запроса могут возвращаться разные наборы данных.
- Фильтрация по полю IS_DEL
    В запросе используется условие "WHERE WORKS.IS_DEL <> 1" для исключения удалённых записей. Если на поле IS_DEL нет индекса, это может привести к полному сканированию таблицы Works.
    Возможно, это повлияет на производительность, но только, если данные в медицинском учреждении часто удаляются.
- Ненужные преобразования типов данных
    В запросе используется преобразование даты CREATE_Date в строку с помощью "convert(varchar(10), works.CREATE_Date, 104)". Если это преобразование не требуется для бизнес-логики, оно является избыточным.